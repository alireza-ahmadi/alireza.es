(function(){var f="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},h="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function k(){k=function(){};h.Symbol||(h.Symbol=aa)}var ba=0;function aa(a){return"jscomp_symbol_"+(a||"")+ba++}
function l(){k();var a=h.Symbol.iterator;a||(a=h.Symbol.iterator=h.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&f(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return m(this)}});l=function(){}}function m(a){var b=0;return ca(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ca(a){l();a={next:a};a[h.Symbol.iterator]=function(){return this};return a}
function n(a){if(!(a instanceof Array)){l();var b=a[Symbol.iterator];a=b?b.call(a):m(a);for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function da(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}
var p=window.Element.prototype,r=p.matches||p.matchesSelector||p.webkitMatchesSelector||p.mozMatchesSelector||p.msMatchesSelector||p.oMatchesSelector;function t(a,b){if(a&&1==a.nodeType&&b){if("string"==typeof b||1==b.nodeType)return a==b||v(a,b);if("length"in b)for(var c=0,d;d=b[c];c++)if(a==d||v(a,d))return!0}return!1}function v(a,b){if("string"!=typeof b)return!1;if(r)return r.call(a,b);b=a.parentNode.querySelectorAll(b);for(var c=0,d;d=b[c];c++)if(d==a)return!0;return!1}
function ea(a){for(var b=[];a&&a.parentNode&&1==a.parentNode.nodeType;)a=a.parentNode,b.push(a);return b}
function fa(a,b,c){function d(a){var d;if(g.composed&&"function"==typeof a.composedPath)for(var e=a.composedPath(),q=0,u;u=e[q];q++)1==u.nodeType&&t(u,b)&&(d=u);else a:{if((d=a.target)&&1==d.nodeType&&b)for(d=[d].concat(ea(d)),e=0;q=d[e];e++)if(t(q,b)){d=q;break a}d=void 0}d&&c.call(d,a,d)}var e=document,g={composed:!0,o:!0},g=void 0===g?{}:g;e.addEventListener(a,d,g.o);return{h:function(){e.removeEventListener(a,d,g.o)}}}
function ha(a){var b={};if(!a||1!=a.nodeType)return b;a=a.attributes;if(!a.length)return{};for(var c=0,d;d=a[c];c++)b[d.name]=d.value;return b}var ia=/:(80|443)$/,w=document.createElement("a"),x={};
function y(a){a=a&&"."!=a?a:location.href;if(x[a])return x[a];w.href=a;if("."==a.charAt(0)||"/"==a.charAt(0))return y(w.href);var b="80"==w.port||"443"==w.port?"":w.port,b="0"==b?"":b,c=w.host.replace(ia,"");return x[a]={hash:w.hash,host:c,hostname:w.hostname,href:w.href,origin:w.origin?w.origin:w.protocol+"//"+c,pathname:"/"==w.pathname.charAt(0)?w.pathname:"/"+w.pathname,port:b,protocol:w.protocol,search:w.search}}var z=[];
function A(a,b){var c=this;this.context=a;this.l=b;this.f=(this.c=/Task$/.test(b))?a.get(b):a[b];this.b=[];this.a=[];this.g=function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];return c.a[c.a.length-1].apply(null,[].concat(n(b)))};this.c?a.set(b,this.g):a[b]=this.g}function B(a,b){a.b.push(b);C(a)}function D(a,b){b=a.b.indexOf(b);-1<b&&(a.b.splice(b,1),0<a.b.length?C(a):a.h())}function C(a){a.a=[];for(var b,c=0;b=a.b[c];c++){var d=a.a[c-1]||a.f.bind(a.context);a.a.push(b(d))}}
A.prototype.h=function(){var a=z.indexOf(this);-1<a&&(z.splice(a,1),this.c?this.context.set(this.l,this.f):this.context[this.l]=this.f)};function E(a,b){var c=z.filter(function(c){return c.context==a&&c.l==b})[0];c||(c=new A(a,b),z.push(c));return c}function F(a,b,c,d,e){if("function"==typeof d){var g=c.get("buildHitTask");return{buildHitTask:function(c){c.set(a,null,!0);c.set(b,null,!0);d(c,e);g(c)}}}return G({},a,b)}
function ja(a,b){var c=ha(a),d={};Object.keys(c).forEach(function(a){if(!a.indexOf(b)&&a!=b+"on"){var e=c[a];"true"==e&&(e=!0);"false"==e&&(e=!1);a=ka(a.slice(b.length));d[a]=e}});return d}function la(a){var b;return function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];clearTimeout(b);b=setTimeout(function(){return a.apply(null,[].concat(n(d)))},500)}}function ma(a){function b(){c||(c=!0,a())}var c=!1;setTimeout(b,2E3);return b}
var G=Object.assign||function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];for(var e=0;d=c[e];e++)for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(a[g]=d[g]);return a};function ka(a){return a.replace(/[\-\_]+(\w?)/g,function(a,c){return c.toUpperCase()})}
function H(a,b){var c=window.GoogleAnalyticsObject||"ga";window[c]=window[c]||function(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];(window[c].q=window[c].q||[]).push(b)};window.gaDevIds=window.gaDevIds||[];0>window.gaDevIds.indexOf("i5iSjo")&&window.gaDevIds.push("i5iSjo");window[c]("provide",a,b);window.gaplugins=window.gaplugins||{};window.gaplugins[a.charAt(0).toUpperCase()+a.slice(1)]=b}function I(){this.a={}}
I.prototype.w=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];(this.a[a]=this.a[a]||[]).forEach(function(a){return a.apply(null,[].concat(n(c)))})};var J={},K=!1;function L(a,b){this.a={};this.key=a;this.j=b||{}}da(L,I);function M(a,b,c){a=["autotrack",a,b].join(":");J[a]||(J[a]=new L(a,c),J[a].key=a,K||(window.addEventListener("storage",N),K=!0));return J[a]}
L.prototype.get=function(){var a=String(window.localStorage&&window.localStorage.getItem(this.key));return"string"!=typeof a?{}:O(a,this.j)};L.prototype.set=function(a){var b=this.get();a=G(b,a);window.localStorage&&window.localStorage.setItem(this.key,JSON.stringify(a))};L.prototype.h=function(){delete J[this.key];Object.keys(J).length||(window.removeEventListener("storage",N),K=!1)};function N(a){var b=J[a.key];if(b){var c=O(a.oldValue,b.j);a=O(a.newValue,b.j);b.w("externalSet",a,c)}}
function O(a,b){var c;try{c=JSON.parse(a)}catch(d){c={}}return G({},b,c)}var na={};function P(a,b,c){this.f=a;this.timeout=b||Q;this.timeZone=c;b=this.b=this.b.bind(this);B(E(a,"sendHitTask"),b);try{this.c=new Intl.DateTimeFormat("en-US",{timeZone:this.timeZone})}catch(d){}this.a=M(a.get("trackingId"),"session",{hitTime:0,isExpired:!1})}
P.prototype.isExpired=function(a){a=a?a:this.a.get();if(a.isExpired)return!0;var b=new Date,c=(a=a.hitTime)&&new Date(a);return a&&(b-c>6E4*this.timeout||this.c&&this.c.format(b)!=this.c.format(c))?!0:!1};P.prototype.b=function(a){var b=this;return function(c){a(c);var d=b.a.get(),e=b.isExpired(d);c=c.get("sessionControl");d.hitTime=+new Date;if("start"==c||e)d.isExpired=!1;"end"==c&&(d.isExpired=!0);b.a.set(d)}};P.prototype.h=function(){var a=this.b;D(E(this.f,"sendHitTask"),a);this.a.h();delete na[this.f.get("trackingId")]};
var Q=30,R={s:1,A:2,B:3,C:4,D:5,v:6,F:7,G:8,H:9,u:10},S=Object.keys(R).length;function T(a,b){a.set("\x26_av","2.0.1");var c=a.get("\x26_au"),c=parseInt(c||"0",16).toString(2);if(c.length<S)for(var d=S-c.length;d;)c="0"+c,d--;b=S-b;c=c.substr(0,b)+1+c.substr(b+1);a.set("\x26_au",parseInt(c||"0",2).toString(16))}
function U(a,b){T(a,R.u);window.addEventListener&&(this.a=G({increaseThreshold:20,sessionTimeout:Q,fieldsObj:{}},b),this.c=a,this.b=V(this),this.f=la(this.f.bind(this)),this.i=this.i.bind(this),this.g=M(a.get("trackingId"),"plugins/max-scroll-tracker"),this.m=new P(a,this.a.sessionTimeout,this.a.timeZone),b=this.i,B(E(a,"set"),b),W(this))}function W(a){100>(a.g.get()[a.b]||0)&&window.addEventListener("scroll",a.f)}
U.prototype.f=function(){var a=document.documentElement,b=document.body,a=Math.min(100,Math.max(0,Math.round(window.pageYOffset/(Math.max(a.offsetHeight,a.scrollHeight,b.offsetHeight,b.scrollHeight)-window.innerHeight)*100)));if(this.m.isExpired())window.localStorage&&window.localStorage.removeItem(this.g.key);else if(b=this.g.get()[this.b]||0,a>b&&(100!=a&&100!=b||window.removeEventListener("scroll",this.f),b=a-b,100==a||b>=this.a.increaseThreshold)){var c={};this.g.set((c[this.b]=a,c));a={transport:"beacon",
eventCategory:"Max Scroll",eventAction:"increase",eventValue:b,eventLabel:String(a),nonInteraction:!0};this.a.maxScrollMetricIndex&&(a["metric"+this.a.maxScrollMetricIndex]=b);this.c.send("event",F(a,this.a.fieldsObj,this.c,this.a.hitFilter))}};U.prototype.i=function(a){var b=this;return function(c){for(var d=[],e=0;e<arguments.length;++e)d[e-0]=arguments[e];a.apply(null,[].concat(n(d)));var e={},g=d[0];("object"==typeof g&&null!==g?d[0]:(e[d[0]]=d[1],e)).page&&(d=b.b,b.b=V(b),b.b!=d&&W(b))}};
function V(a){a=y(a.c.get("page")||a.c.get("location"));return a.pathname+a.search}U.prototype.remove=function(){this.m.h();window.removeEventListener("scroll",this.f);var a=this.i;D(E(this.c,"set"),a)};H("maxScrollTracker",U);
function X(a,b){var c=this;T(a,R.v);window.addEventListener&&(this.a=G({events:["click"],linkSelector:"a, area",shouldTrackOutboundLink:this.shouldTrackOutboundLink,fieldsObj:{},attributePrefix:"ga-"},b),this.f=a,this.c=this.c.bind(this),this.b={},this.a.events.forEach(function(a){c.b[a]=fa(a,c.a.linkSelector,c.c)}))}
X.prototype.c=function(a,b){if(this.a.shouldTrackOutboundLink(b,y)){var c=b.getAttribute("href")||b.getAttribute("xlink:href"),d=y(c),e={transport:"beacon",eventCategory:"Outbound Link",eventAction:a.type,eventLabel:d.href};navigator.sendBeacon||"click"!=a.type||"_blank"==b.target||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||1<a.which||window.addEventListener("click",function(a){a.defaultPrevented||(a.preventDefault(),e.hitCallback=ma(function(){location.href=c}))});a=G({},this.a.fieldsObj,ja(b,this.a.attributePrefix));
this.f.send("event",F(e,a,this.f,this.a.hitFilter,b))}};X.prototype.shouldTrackOutboundLink=function(a,b){a=a.getAttribute("href")||a.getAttribute("xlink:href");b=b(a);return b.hostname!=location.hostname&&"http"==b.protocol.slice(0,4)};X.prototype.remove=function(){var a=this;Object.keys(this.b).forEach(function(b){a.b[b].h()})};H("outboundLinkTracker",X);
function Y(a,b){T(a,R.s);this.a=G({},b);this.g=a;this.b=this.a.stripQuery&&this.a.queryDimensionIndex?"dimension"+this.a.queryDimensionIndex:null;this.f=this.f.bind(this);this.c=this.c.bind(this);b=this.f;B(E(a,"get"),b);b=this.c;B(E(a,"buildHitTask"),b)}Y.prototype.f=function(a){var b=this;return function(c){if("page"==c||c==b.b){var d={location:a("location"),page:a("page")};return Z(b,d)[c]}return a(c)}};
Y.prototype.c=function(a){var b=this;return function(c){var d=Z(b,{location:c.get("location"),page:c.get("page")});c.set(d,null,!0);a(c)}};
function Z(a,b){var c=y(b.page||b.location),d=c.pathname;if(a.a.indexFilename){var e=d.split("/");a.a.indexFilename==e[e.length-1]&&(e[e.length-1]="",d=e.join("/"))}"remove"==a.a.trailingSlash?d=d.replace(/\/+$/,""):"add"==a.a.trailingSlash&&(/\.\w+$/.test(d)||"/"==d.substr(-1)||(d+="/"));d={page:d+(a.a.stripQuery?"":c.search)};b.location&&(d.location=b.location);a.b&&(d[a.b]=c.search.slice(1)||"(not set)");return"function"==typeof a.a.urlFieldsFilter?(b=a.a.urlFieldsFilter(d,y),c={},c.page=b.page,
c.location=b.location,c[a.b]=b[a.b],c):d}Y.prototype.remove=function(){var a=this.f;D(E(this.g,"get"),a);a=this.c;D(E(this.g,"buildHitTask"),a)};H("cleanUrlTracker",Y);})();
//# sourceMappingURL=autotrack.js.map